"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[843],{843:(N,m,c)=>{c.r(m),c.d(m,{HistoryDetailPageModule:()=>T});var l=c(2200),h=c(4341),r=c(7343),f=c(8132),_=c(467),e=c(3664),d=c(2615),P=c(8012),M=c(5032),v=c(6057);function y(t,s){1&t&&(e.qex(0),e.j41(1,"div",4),e.nrm(2,"ion-spinner",5),e.j41(3,"p"),e.EFF(4,"Loading session..."),e.k0s()(),e.bVm())}function C(t,s){if(1&t){const o=e.RV6();e.qex(0),e.j41(1,"div",6),e.nrm(2,"ion-icon",7),e.j41(3,"h2"),e.EFF(4,"Session not found"),e.k0s(),e.j41(5,"p"),e.EFF(6,"Unable to load this session."),e.k0s(),e.j41(7,"ion-button",8),e.bIt("click",function(){d.eBV(o);const i=e.XpG();return d.Njj(i.goBack())}),e.EFF(8," Go Back "),e.k0s()(),e.bVm()}}function F(t,s){if(1&t&&(e.j41(0,"div",11)(1,"span",12),e.EFF(2,"Duration"),e.k0s(),e.j41(3,"span",13),e.EFF(4),e.k0s()()),2&t){const o=e.XpG(2);e.R7$(4),e.SpI("",o.getDurationMinutes()," min")}}function O(t,s){if(1&t&&(e.j41(0,"span",29),e.EFF(1),e.k0s()),2&t){const o=s.ngIf;e.R7$(),e.JRh(o)}}function E(t,s){if(1&t&&(e.j41(0,"div",25)(1,"span",26),e.EFF(2),e.k0s(),e.j41(3,"span",27),e.EFF(4),e.k0s(),e.DNE(5,O,2,1,"span",28),e.k0s()),2&t){const o=s.$implicit,n=e.XpG(5);e.R7$(2),e.JRh(o.setIndex+1),e.R7$(2),e.JRh(n.formatSet(o)),e.R7$(),e.Y8G("ngIf",n.formatRpe(o))}}function D(t,s){if(1&t&&(e.j41(0,"div",23),e.DNE(1,E,6,3,"div",24),e.k0s()),2&t){const o=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",o.sets)}}function k(t,s){1&t&&(e.j41(0,"div",30)(1,"p"),e.EFF(2,"No sets logged"),e.k0s()())}function b(t,s){if(1&t&&(e.j41(0,"ion-card",19)(1,"ion-card-header")(2,"ion-card-subtitle")(3,"span",20),e.EFF(4),e.k0s(),e.EFF(5),e.k0s(),e.j41(6,"ion-card-title"),e.EFF(7),e.k0s()(),e.j41(8,"ion-card-content"),e.DNE(9,D,2,1,"div",21)(10,k,3,0,"div",22),e.k0s()()),2&t){const o=s.$implicit,n=s.index,i=e.XpG(3);e.R7$(4),e.JRh(n+1),e.R7$(),e.SpI(" ",i.formatCategory(o.exercise.category)," "),e.R7$(2),e.JRh(o.exercise.name),e.R7$(2),e.Y8G("ngIf",o.sets.length>0),e.R7$(),e.Y8G("ngIf",0===o.sets.length)}}function j(t,s){if(1&t&&(e.j41(0,"div",17)(1,"h2"),e.EFF(2,"Exercises"),e.k0s(),e.DNE(3,b,11,5,"ion-card",18),e.k0s()),2&t){const o=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",o.exercises)}}function R(t,s){1&t&&(e.j41(0,"div",31)(1,"p"),e.EFF(2,"No exercises were logged in this session."),e.k0s()())}function I(t,s){if(1&t&&(e.qex(0),e.j41(1,"ion-card",9)(2,"ion-card-content")(3,"div",10)(4,"div",11)(5,"span",12),e.EFF(6,"Date"),e.k0s(),e.j41(7,"span",13),e.EFF(8),e.k0s()(),e.j41(9,"div",11)(10,"span",12),e.EFF(11,"Time"),e.k0s(),e.j41(12,"span",13),e.EFF(13),e.k0s()(),e.DNE(14,F,5,1,"div",14),e.k0s()()(),e.DNE(15,j,4,1,"div",15)(16,R,3,0,"div",16),e.bVm()),2&t){const o=e.XpG();e.R7$(8),e.JRh(o.formatDate(o.session.endedAt)),e.R7$(5),e.Lme("",o.formatTime(o.session.startedAt)," \u2013 ",o.formatTime(o.session.endedAt)),e.R7$(),e.Y8G("ngIf",o.getDurationMinutes()>0),e.R7$(),e.Y8G("ngIf",o.exercises.length>0),e.R7$(),e.Y8G("ngIf",0===o.exercises.length)}}const $=[{path:"",component:(()=>{var t;class s{constructor(n,i,a){this.route=n,this.navController=i,this.db=a,this.session=null,this.exercises=[],this.isLoading=!0,this.loadError=!1}ngOnInit(){var n=this;return(0,_.A)(function*(){const i=n.route.snapshot.paramMap.get("id");if(!i)return n.loadError=!0,void(n.isLoading=!1);yield n.loadSession(i)})()}loadSession(n){var i=this;return(0,_.A)(function*(){i.isLoading=!0;try{const a=yield i.db.getSession(n);if(!a)return void(i.loadError=!0);i.session=a;const p=yield i.db.getSessionExercises(n);if(0===p.length)return void(i.exercises=[]);const H=p.map(g=>g.exerciseId),S=yield i.db.getExercisesByIds(H),u=[];for(const g of p){const x=S.get(g.exerciseId);if(!x)continue;const w=yield i.db.getSetsForSessionExercise(g.id);u.push({exercise:x,sessionExercise:g,sets:w})}i.exercises=u}catch(a){console.error("Failed to load session:",a),i.loadError=!0}finally{i.isLoading=!1}})()}goBack(){this.navController.back()}formatDate(n){return new Date(n).toLocaleDateString([],{weekday:"short",month:"short",day:"numeric"})}formatTime(n){return new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}getDurationMinutes(){if(!this.session?.startedAt||!this.session?.endedAt)return 0;const n=new Date(this.session.startedAt).getTime(),i=new Date(this.session.endedAt).getTime();return Math.round((i-n)/6e4)}formatCategory(n){return n.charAt(0).toUpperCase()+n.slice(1)}formatSet(n){return`${void 0!==n.weight?`${n.weight} kg`:"\u2014"} \xd7 ${void 0!==n.reps?`${n.reps}`:"\u2014"}`}formatRpe(n){return void 0!==n.rpe?`RPE ${n.rpe}`:null}static#e=t=()=>(this.\u0275fac=function(i){return new(i||s)(e.rXU(P.nX),e.rXU(M.q9),e.rXU(v.at))},this.\u0275cmp=e.VBU({type:s,selectors:[["app-history-detail"]],standalone:!1,decls:10,vars:3,consts:[["slot","start"],["defaultHref","/tabs/history"],[1,"ion-padding"],[4,"ngIf"],[1,"loading-state"],["name","crescent"],[1,"error-state"],["name","alert-circle-outline"],["fill","outline",3,"click"],[1,"session-header-card"],[1,"session-meta"],[1,"meta-item"],[1,"meta-label"],[1,"meta-value"],["class","meta-item",4,"ngIf"],["class","exercises-section",4,"ngIf"],["class","no-exercises",4,"ngIf"],[1,"exercises-section"],["class","exercise-card",4,"ngFor","ngForOf"],[1,"exercise-card"],[1,"exercise-number"],["class","sets-list",4,"ngIf"],["class","no-sets",4,"ngIf"],[1,"sets-list"],["class","set-row",4,"ngFor","ngForOf"],[1,"set-row"],[1,"set-number"],[1,"set-value"],["class","set-rpe",4,"ngIf"],[1,"set-rpe"],[1,"no-sets"],[1,"no-exercises"]],template:function(i,a){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button",1),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Session Details"),e.k0s()()(),e.j41(6,"ion-content",2),e.DNE(7,y,5,0,"ng-container",3)(8,C,9,0,"ng-container",3)(9,I,17,6,"ng-container",3),e.k0s()),2&i&&(e.R7$(7),e.Y8G("ngIf",a.isLoading),e.R7$(),e.Y8G("ngIf",!a.isLoading&&a.loadError),e.R7$(),e.Y8G("ngIf",!a.isLoading&&!a.loadError&&a.session))},dependencies:[l.Sq,l.bT,r.Jm,r.QW,r.b_,r.I9,r.ME,r.HW,r.tN,r.W9,r.eU,r.iq,r.w2,r.BC,r.ai,r.el],styles:[".loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:48px 24px;height:60%}.loading-state[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;opacity:.3;margin-bottom:16px}.loading-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.25rem;font-weight:600}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;opacity:.6}.session-header-card[_ngcontent-%COMP%]{margin-bottom:24px}.session-meta[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.meta-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.meta-item[_ngcontent-%COMP%]   .meta-label[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.5px;opacity:.5}.meta-item[_ngcontent-%COMP%]   .meta-value[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500}.exercises-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1.1rem;font-weight:600}.exercise-card[_ngcontent-%COMP%]{margin-bottom:16px}.exercise-card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.exercise-card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]   .exercise-number[_ngcontent-%COMP%]{background:var(--ion-color-primary);color:var(--ion-color-primary-contrast);width:20px;height:20px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:600}.exercise-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding-top:8px}.sets-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.set-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px 12px;background:var(--ion-color-step-100);border-radius:6px}.set-number[_ngcontent-%COMP%]{width:24px;font-size:.85rem;font-weight:600;opacity:.6}.set-value[_ngcontent-%COMP%]{flex:1;font-family:IBM Plex Mono,monospace;font-size:.95rem}.set-rpe[_ngcontent-%COMP%]{font-size:.8rem;opacity:.6;padding:2px 8px;background:var(--ion-color-step-150);border-radius:4px}.no-sets[_ngcontent-%COMP%], .no-exercises[_ngcontent-%COMP%]{text-align:center;padding:16px;opacity:.5;font-size:.9rem}.no-sets[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .no-exercises[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]}))}return t(),s})()}];let G=(()=>{var t;class s{static#e=t=()=>(this.\u0275fac=function(i){return new(i||s)},this.\u0275mod=e.$C({type:s}),this.\u0275inj=d.G2t({imports:[f.iI.forChild($),f.iI]}))}return t(),s})(),T=(()=>{var t;class s{static#e=t=()=>(this.\u0275fac=function(i){return new(i||s)},this.\u0275mod=e.$C({type:s}),this.\u0275inj=d.G2t({imports:[l.MD,h.YN,r.bv,G]}))}return t(),s})()}}]);