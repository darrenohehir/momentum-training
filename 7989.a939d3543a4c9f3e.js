"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7989],{7989:(Xe,M,g)=>{g.r(M),g.d(M,{SessionPageModule:()=>$e});var m=g(2200),C=g(4341),l=g(7343),S=g(8132),_=g(467),b=g(305),e=g(3664),a=g(2615),P=g(6057);const j=()=>[1,2,3,4,5];function R(r,s){1&r&&(e.j41(0,"ion-item")(1,"ion-label")(2,"h2"),e.nrm(3,"ion-skeleton-text",12),e.k0s(),e.j41(4,"p"),e.nrm(5,"ion-skeleton-text",13),e.k0s()()())}function G(r,s){1&r&&(e.j41(0,"div",10)(1,"ion-list"),e.DNE(2,R,6,0,"ion-item",11),e.k0s()()),2&r&&(e.R7$(2),e.Y8G("ngForOf",e.lJ4(1,j)))}function $(r,s){if(1&r){const i=e.RV6();e.j41(0,"ion-item",15),e.bIt("click",function(){const t=a.eBV(i).$implicit,o=e.XpG(3);return a.Njj(o.selectExercise(t))}),e.j41(1,"ion-label")(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s()()()}if(2&r){const i=s.$implicit,n=e.XpG(3);e.R7$(3),e.JRh(i.name),e.R7$(2),e.JRh(n.formatCategory(i.category))}}function T(r,s){if(1&r&&(e.j41(0,"ion-list"),e.DNE(1,$,6,2,"ion-item",14),e.k0s()),2&r){const i=e.XpG(2);e.R7$(),e.Y8G("ngForOf",i.filteredExercises)}}function N(r,s){if(1&r&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&r){const i=e.XpG(3);e.R7$(),e.SpI('No exercises matching "',i.searchQuery,'"')}}function X(r,s){1&r&&(e.j41(0,"p"),e.EFF(1,"No exercises in library"),e.k0s())}function A(r,s){if(1&r&&(e.j41(0,"div",16),e.nrm(1,"ion-icon",17),e.DNE(2,N,2,1,"p",3)(3,X,2,0,"p",3),e.k0s()),2&r){const i=e.XpG(2);e.R7$(2),e.Y8G("ngIf",i.searchQuery),e.R7$(),e.Y8G("ngIf",!i.searchQuery)}}function B(r,s){if(1&r){const i=e.RV6();e.qex(0),e.j41(1,"ion-searchbar",4),e.mxI("ngModelChange",function(t){a.eBV(i);const o=e.XpG();return e.DH7(o.searchQuery,t)||(o.searchQuery=t),a.Njj(t)}),e.bIt("ionInput",function(){a.eBV(i);const t=e.XpG();return a.Njj(t.onSearchChange())}),e.k0s(),e.DNE(2,G,3,2,"div",5)(3,T,2,1,"ion-list",3)(4,A,4,2,"div",6),e.j41(5,"div",7)(6,"ion-button",8),e.bIt("click",function(){a.eBV(i);const t=e.XpG();return a.Njj(t.showCreateForm())}),e.nrm(7,"ion-icon",9),e.EFF(8," Create New Exercise "),e.k0s()(),e.bVm()}if(2&r){const i=e.XpG();e.R7$(),e.R50("ngModel",i.searchQuery),e.Y8G("debounce",150),e.R7$(),e.Y8G("ngIf",i.isLoading),e.R7$(),e.Y8G("ngIf",!i.isLoading&&i.filteredExercises.length>0),e.R7$(),e.Y8G("ngIf",!i.isLoading&&0===i.filteredExercises.length)}}function D(r,s){if(1&r&&(e.j41(0,"ion-select-option",23),e.EFF(1),e.k0s()),2&r){const i=s.$implicit;e.Y8G("value",i.value),e.R7$(),e.SpI(" ",i.label," ")}}function V(r,s){if(1&r&&(e.j41(0,"ion-select-option",23),e.EFF(1),e.k0s()),2&r){const i=s.$implicit;e.Y8G("value",i.value),e.R7$(),e.SpI(" ",i.label," ")}}function Y(r,s){if(1&r){const i=e.RV6();e.qex(0),e.j41(1,"div",10)(2,"ion-list")(3,"ion-item")(4,"ion-input",18),e.mxI("ngModelChange",function(t){a.eBV(i);const o=e.XpG();return e.DH7(o.newExerciseName,t)||(o.newExerciseName=t),a.Njj(t)}),e.k0s()(),e.j41(5,"ion-item")(6,"ion-select",19),e.mxI("ngModelChange",function(t){a.eBV(i);const o=e.XpG();return e.DH7(o.newExerciseCategory,t)||(o.newExerciseCategory=t),a.Njj(t)}),e.DNE(7,D,2,2,"ion-select-option",20),e.k0s()(),e.j41(8,"ion-item")(9,"ion-select",21),e.mxI("ngModelChange",function(t){a.eBV(i);const o=e.XpG();return e.DH7(o.newExerciseEquipment,t)||(o.newExerciseEquipment=t),a.Njj(t)}),e.DNE(10,V,2,2,"ion-select-option",20),e.k0s()()(),e.j41(11,"ion-button",22),e.bIt("click",function(){a.eBV(i);const t=e.XpG();return a.Njj(t.createExercise())}),e.EFF(12," Create & Add to Session "),e.k0s()(),e.bVm()}if(2&r){const i=e.XpG();e.R7$(4),e.R50("ngModel",i.newExerciseName),e.Y8G("clearInput",!0),e.R7$(2),e.R50("ngModel",i.newExerciseCategory),e.R7$(),e.Y8G("ngForOf",i.categoryOptions),e.R7$(2),e.R50("ngModel",i.newExerciseEquipment),e.R7$(),e.Y8G("ngForOf",i.equipmentOptions),e.R7$(),e.Y8G("disabled",!i.isCreateFormValid)}}let L=(()=>{var r;class s{constructor(n,t){this.modalController=n,this.db=t,this.exercises=[],this.filteredExercises=[],this.searchQuery="",this.isLoading=!0,this.view="list",this.newExerciseName="",this.newExerciseCategory="other",this.newExerciseEquipment="other",this.categoryOptions=[{value:"chest",label:"Chest"},{value:"back",label:"Back"},{value:"shoulders",label:"Shoulders"},{value:"arms",label:"Arms"},{value:"legs",label:"Legs"},{value:"core",label:"Core"},{value:"cardio",label:"Cardio"},{value:"other",label:"Other"}],this.equipmentOptions=[{value:"barbell",label:"Barbell"},{value:"dumbbell",label:"Dumbbell"},{value:"cable",label:"Cable"},{value:"machine",label:"Machine"},{value:"bodyweight",label:"Bodyweight"},{value:"cardio",label:"Cardio"},{value:"other",label:"Other"}]}ngOnInit(){var n=this;return(0,_.A)(function*(){yield n.loadExercises()})()}loadExercises(){var n=this;return(0,_.A)(function*(){n.isLoading=!0;try{n.exercises=yield n.db.getAllExercises(),n.filterExercises()}catch(t){console.error("Failed to load exercises:",t)}finally{n.isLoading=!1}})()}filterExercises(){const n=this.searchQuery.toLowerCase().trim();this.filteredExercises=n?this.exercises.filter(t=>t.name.toLowerCase().includes(n)||t.category.toLowerCase().includes(n)):[...this.exercises]}onSearchChange(){this.filterExercises()}selectExercise(n){this.modalController.dismiss({exercise:n,isNew:!1})}showCreateForm(){this.newExerciseName=this.searchQuery,this.view="create"}cancelCreate(){this.view="list",this.resetCreateForm()}resetCreateForm(){this.newExerciseName="",this.newExerciseCategory="other",this.newExerciseEquipment="other"}createExercise(){var n=this;return(0,_.A)(function*(){const t=n.newExerciseName.trim();if(!t)return;const o=(new Date).toISOString(),c={id:(0,b.l)(),name:t,category:n.newExerciseCategory,equipmentType:n.newExerciseEquipment,createdAt:o,updatedAt:o};try{yield n.db.addExercise(c),n.modalController.dismiss({exercise:c,isNew:!0})}catch(d){console.error("Failed to create exercise:",d)}})()}get isCreateFormValid(){return this.newExerciseName.trim().length>0}dismiss(){this.modalController.dismiss(null)}formatCategory(n){return n.charAt(0).toUpperCase()+n.slice(1)}static#e=r=()=>(this.\u0275fac=function(t){return new(t||s)(e.rXU(l.W3),e.rXU(P.at))},this.\u0275cmp=e.VBU({type:s,selectors:[["app-exercise-picker"]],standalone:!1,decls:10,vars:4,consts:[["slot","start"],[3,"click"],["slot","icon-only",3,"name"],[4,"ngIf"],["placeholder","Search exercises...",3,"ngModelChange","ionInput","ngModel","debounce"],["class","ion-padding",4,"ngIf"],["class","empty-state ion-padding",4,"ngIf"],[1,"create-button-container","ion-padding"],["expand","block","fill","outline",3,"click"],["slot","start","name","add-outline"],[1,"ion-padding"],[4,"ngFor","ngForOf"],["animated","",2,"width","70%"],["animated","",2,"width","40%"],["button","","detail","true",3,"click",4,"ngFor","ngForOf"],["button","","detail","true",3,"click"],[1,"empty-state","ion-padding"],["name","search-outline"],["label","Exercise Name","labelPlacement","stacked","placeholder","e.g. Bench Press",3,"ngModelChange","ngModel","clearInput"],["label","Category","labelPlacement","stacked","interface","action-sheet",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["label","Equipment","labelPlacement","stacked","interface","action-sheet",3,"ngModelChange","ngModel"],["expand","block",1,"ion-margin-top",3,"click","disabled"],[3,"value"]],template:function(t,o){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){return"create"===o.view?o.cancelCreate():o.dismiss()}),e.nrm(4,"ion-icon",2),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6),e.k0s()()(),e.j41(7,"ion-content"),e.DNE(8,B,9,5,"ng-container",3)(9,Y,13,7,"ng-container",3),e.k0s()),2&t&&(e.R7$(4),e.Y8G("name","create"===o.view?"arrow-back":"close"),e.R7$(2),e.JRh("create"===o.view?"New Exercise":"Add Exercise"),e.R7$(2),e.Y8G("ngIf","list"===o.view),e.R7$(),e.Y8G("ngIf","create"===o.view))},dependencies:[m.Sq,m.bT,C.BC,C.vS,l.Jm,l.QW,l.W9,l.eU,l.iq,l.$w,l.uz,l.he,l.nf,l.S1,l.Nm,l.Ip,l.ds,l.BC,l.ai,l.Je,l.Gw],styles:["ion-searchbar[_ngcontent-%COMP%]{--background: var(--ion-color-step-150);--border-radius: 8px;padding:8px 16px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:48px 24px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;opacity:.2;margin-bottom:12px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;opacity:.5;font-size:.9rem}.create-button-container[_ngcontent-%COMP%]{padding-top:8px;border-top:1px solid var(--ion-color-step-150);margin-top:8px}ion-list[_ngcontent-%COMP%]{background:transparent}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: var(--ion-color-step-100);margin-bottom:8px;border-radius:8px}"]}))}return r(),s})();var O=g(1413),U=g(8359);class z extends U.yU{constructor(s,i){super()}schedule(s,i=0){return this}}const E={setInterval(r,s,...i){const{delegate:n}=E;return n?.setInterval?n.setInterval(r,s,...i):setInterval(r,s,...i)},clearInterval(r){const{delegate:s}=E;return(s?.clearInterval||clearInterval)(r)},delegate:void 0};var W=g(7908);const k={now:()=>(k.delegate||Date).now(),delegate:void 0};class v{constructor(s,i=v.now){this.schedulerActionCtor=s,this.now=i}schedule(s,i=0,n){return new this.schedulerActionCtor(this,s).schedule(n,i)}}v.now=k.now;const H=new class J extends v{constructor(s,i=v.now){super(s,i),this.actions=[],this._active=!1}flush(s){const{actions:i}=this;if(this._active)return void i.push(s);let n;this._active=!0;do{if(n=s.execute(s.state,s.delay))break}while(s=i.shift());if(this._active=!1,n){for(;s=i.shift();)s.unsubscribe();throw n}}}(class Q extends z{constructor(s,i){super(s,i),this.scheduler=s,this.work=i,this.pending=!1}schedule(s,i=0){var n;if(this.closed)return this;this.state=s;const t=this.id,o=this.scheduler;return null!=t&&(this.id=this.recycleAsyncId(o,t,i)),this.pending=!0,this.delay=i,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(o,this.id,i),this}requestAsyncId(s,i,n=0){return E.setInterval(s.flush.bind(s,this),n)}recycleAsyncId(s,i,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return i;null!=i&&E.clearInterval(i)}execute(s,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(s,i);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,i){let t,n=!1;try{this.work(s)}catch(o){n=!0,t=o||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),t}unsubscribe(){if(!this.closed){const{id:s,scheduler:i}=this,{actions:n}=i;this.work=this.state=this.scheduler=null,this.pending=!1,(0,W.o)(n,this),null!=s&&(this.id=this.recycleAsyncId(i,s,null)),this.delay=null,super.unsubscribe()}}});var q=g(9974),K=g(4360),ee=g(6977),I=g(8012),ne=g(5539);let te=(()=>{var r;class s{constructor(n){this.db=n}detectSessionPRs(n){var t=this;return(0,_.A)(function*(){const o=yield t.db.getPREventsForSession(n);if(o.length>0)return o;const c=yield t.db.getSessionExercises(n);if(0===c.length)return[];const d=[],p=(new Date).toISOString();for(const u of c){const h=u.exerciseId,x=yield t.getCurrentMaxWeight(h,n);if(null===x)continue;const f=yield t.getHistoricalMaxWeight(h,n);if(null!==f&&x>f){const y={id:(0,b.l)(),sessionId:n,exerciseId:h,previousMax:f,newMax:x,detectedAt:p};d.push(y)}}return d.length>0&&(yield t.db.addPREvents(d)),d})()}getCurrentMaxWeight(n,t){var o=this;return(0,_.A)(function*(){const c=yield o.db.getSetsForExerciseInSession(n,t);return 0===c.length?null:Math.max(...c.map(p=>p.weight))})()}getHistoricalMaxWeight(n,t){var o=this;return(0,_.A)(function*(){const c=yield o.db.getHistoricalSetsForExercise(n,t);return 0===c.length?null:Math.max(...c.map(p=>p.weight))})()}getPRsForSession(n){var t=this;return(0,_.A)(function*(){return t.db.getPREventsForSession(n)})()}static#e=r=()=>(this.\u0275fac=function(t){return new(t||s)(a.KVO(P.at))},this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}))}return r(),s})(),se=(()=>{var r;class s{constructor(n,t){this.db=n,this.prService=t}calculateSessionXp(n){var t=this;return(0,_.A)(function*(){if(!(yield t.db.getSession(n)))return null;const c=yield t.db.countSetsForSession(n),p=5*c;return{sessionXp:100+p,sessionCompletionXp:100,setXp:p,setCount:c}})()}awardSessionXp(n){var t=this;return(0,_.A)(function*(){const o=yield t.db.getSession(n);if(!o)return console.error("[XpService] Session not found:",n),null;if(!o.endedAt)return console.error("[XpService] Cannot award XP for incomplete session:",n),null;if(o.xpAwarded)return null;const c=yield t.prService.detectSessionPRs(n),d=c.length,u=50*Math.min(d,3),h=yield t.db.countSetsForSession(n),f=5*h,y=100+f+u,Te=yield t.db.addXp(y),Ne={...o,xpAwarded:!0,updatedAt:(new Date).toISOString()};return yield t.db.updateSession(Ne),{sessionXp:y,sessionCompletionXp:100,setXp:f,setCount:h,prXp:u,prCount:d,prs:c,newTotalXp:Te}})()}static#e=r=()=>(this.\u0275fac=function(t){return new(t||s)(a.KVO(P.at),a.KVO(te))},this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}))}return r(),s})();const re=()=>[1,2];function ce(r,s){1&r&&(e.qex(0),e.j41(1,"div",3),e.nrm(2,"ion-spinner",4),e.j41(3,"p"),e.EFF(4,"Loading session..."),e.k0s()(),e.bVm())}function ae(r,s){1&r&&(e.qex(0),e.j41(1,"div",5),e.nrm(2,"ion-icon",6),e.j41(3,"h2"),e.EFF(4,"Session not found"),e.k0s(),e.j41(5,"p"),e.EFF(6,"Unable to load this session."),e.k0s(),e.j41(7,"ion-button",7),e.EFF(8," Return Home "),e.k0s()(),e.bVm())}function le(r,s){if(1&r&&(e.j41(0,"ion-card-content")(1,"ion-chip"),e.nrm(2,"ion-icon",19),e.j41(3,"ion-label"),e.EFF(4),e.k0s()()()),2&r){const i=s.ngIf;e.R7$(4),e.JRh(i)}}function de(r,s){if(1&r&&(e.j41(0,"span",20),e.EFF(1),e.k0s()),2&r){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.sessionExercises.length," ")}}function _e(r,s){1&r&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.nrm(3,"ion-skeleton-text",23),e.k0s(),e.j41(4,"ion-card-subtitle"),e.nrm(5,"ion-skeleton-text",24),e.k0s()()())}function pe(r,s){1&r&&(e.j41(0,"div",21),e.DNE(1,_e,6,0,"ion-card",22),e.k0s()),2&r&&(e.R7$(),e.Y8G("ngForOf",e.lJ4(1,re)))}function ue(r,s){if(1&r&&(e.j41(0,"span",50),e.EFF(1),e.k0s()),2&r){const i=s.$implicit,n=e.XpG(6);e.R7$(),e.SpI(" ",n.formatGhostSet(i)," ")}}function ge(r,s){if(1&r){const i=e.RV6();e.j41(0,"ion-button",51),e.bIt("click",function(){a.eBV(i);const t=e.XpG(3).$implicit,o=e.XpG(3);return a.Njj(o.copyLastSets(t))}),e.nrm(1,"ion-icon",52),e.EFF(2," Copy last sets "),e.k0s()}}function he(r,s){if(1&r&&(e.j41(0,"div",43)(1,"div",44)(2,"span",45),e.EFF(3,"Previous"),e.k0s(),e.j41(4,"span",46),e.EFF(5),e.k0s()(),e.j41(6,"div",47),e.DNE(7,ue,2,1,"span",48),e.k0s(),e.DNE(8,ge,3,0,"ion-button",49),e.k0s()),2&r){const i=e.XpG().ngIf,n=e.XpG().$implicit,t=e.XpG(3);e.R7$(5),e.JRh(t.formatGhostDate(i.session.endedAt)),e.R7$(2),e.Y8G("ngForOf",i.sets),e.R7$(),e.Y8G("ngIf",t.canCopyLastSets(n))}}function me(r,s){if(1&r&&(e.qex(0),e.DNE(1,he,9,3,"div",42),e.bVm()),2&r){const i=s.ngIf;e.R7$(),e.Y8G("ngIf",i.sets.length>0)}}function xe(r,s){1&r&&(e.j41(0,"span",59),e.EFF(1,"RPE"),e.k0s())}function fe(r,s){if(1&r&&(e.j41(0,"div",53)(1,"span",54),e.EFF(2,"Set"),e.k0s(),e.j41(3,"span",55),e.EFF(4,"Weight (kg)"),e.k0s(),e.j41(5,"span",56),e.EFF(6,"Reps"),e.k0s(),e.DNE(7,xe,2,0,"span",57),e.nrm(8,"span",58),e.k0s()),2&r){const i=e.XpG().$implicit;e.R7$(7),e.Y8G("ngIf",i.showRpe)}}function be(r,s){1&r&&(e.j41(0,"div",60),e.nrm(1,"ion-skeleton-text",61),e.k0s())}function ve(r,s){if(1&r){const i=e.RV6();e.j41(0,"div",75)(1,"ion-input",76),e.bIt("ionInput",function(t){a.eBV(i);const o=e.XpG().$implicit,c=e.XpG(5);return a.Njj(c.onRpeChange(o,t.target.value))})("ionBlur",function(){a.eBV(i);const t=e.XpG().$implicit,o=e.XpG(5);return a.Njj(o.onInputBlur(t))}),e.k0s()()}if(2&r){const i=e.XpG().$implicit;e.R7$(),e.Y8G("value",i.rpe)}}function Ce(r,s){if(1&r){const i=e.RV6();e.j41(0,"div",65)(1,"span",66),e.EFF(2),e.k0s(),e.j41(3,"div",67)(4,"ion-input",68),e.bIt("ionInput",function(t){const o=a.eBV(i).$implicit,c=e.XpG(5);return a.Njj(c.onWeightChange(o,t.target.value))})("ionBlur",function(){const t=a.eBV(i).$implicit,o=e.XpG(5);return a.Njj(o.onInputBlur(t))}),e.k0s()(),e.j41(5,"div",69)(6,"ion-input",70),e.bIt("ionInput",function(t){const o=a.eBV(i).$implicit,c=e.XpG(5);return a.Njj(c.onRepsChange(o,t.target.value))})("ionBlur",function(){const t=a.eBV(i).$implicit,o=e.XpG(5);return a.Njj(o.onInputBlur(t))}),e.k0s()(),e.DNE(7,ve,2,1,"div",71),e.j41(8,"div",72)(9,"ion-button",73),e.bIt("click",function(){const t=a.eBV(i).$implicit,o=e.XpG(2).$implicit,c=e.XpG(3);return a.Njj(c.removeSet(o,t))}),e.nrm(10,"ion-icon",74),e.k0s()()()}if(2&r){const i=s.$implicit,n=e.XpG(2).$implicit;e.R7$(2),e.JRh(i.setIndex+1),e.R7$(2),e.Y8G("value",i.weight),e.R7$(2),e.Y8G("value",i.reps),e.R7$(),e.Y8G("ngIf",n.showRpe)}}function Pe(r,s){1&r&&(e.j41(0,"div",77)(1,"p"),e.EFF(2,"No sets logged yet"),e.k0s()())}function Ee(r,s){if(1&r&&(e.j41(0,"div",62),e.DNE(1,Ce,11,4,"div",63)(2,Pe,3,0,"div",64),e.k0s()),2&r){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",i.sets),e.R7$(),e.Y8G("ngIf",0===i.sets.length)}}function ye(r,s){if(1&r){const i=e.RV6();e.j41(0,"ion-item",27),e.nrm(1,"ion-reorder",28),e.j41(2,"ion-card",29)(3,"ion-card-header")(4,"div",30)(5,"div",31)(6,"ion-card-subtitle")(7,"span",32),e.EFF(8),e.k0s(),e.EFF(9),e.k0s(),e.j41(10,"ion-card-title"),e.EFF(11),e.k0s()(),e.j41(12,"ion-button",33),e.bIt("click",function(){const t=a.eBV(i).$implicit,o=e.XpG(3);return a.Njj(o.removeExercise(t))}),e.nrm(13,"ion-icon",34),e.k0s()()(),e.j41(14,"ion-card-content"),e.DNE(15,me,2,1,"ng-container",1),e.j41(16,"div",35)(17,"ion-button",36),e.bIt("click",function(){const t=a.eBV(i).$implicit,o=e.XpG(3);return a.Njj(o.toggleRpe(t))}),e.nrm(18,"ion-icon",37),e.EFF(19),e.k0s()(),e.DNE(20,fe,9,1,"div",38)(21,be,2,0,"div",39)(22,Ee,3,2,"div",40),e.j41(23,"ion-button",41),e.bIt("click",function(){const t=a.eBV(i).$implicit,o=e.XpG(3);return a.Njj(o.addSet(t))}),e.nrm(24,"ion-icon",16),e.EFF(25," Add Set "),e.k0s()()()()}if(2&r){const i=s.$implicit,n=s.index,t=e.XpG(3);e.R7$(8),e.JRh(n+1),e.R7$(),e.SpI(" ",t.formatCategory(i.exercise.category)," "),e.R7$(2),e.JRh(i.exercise.name),e.R7$(4),e.Y8G("ngIf",t.getGhost(i.exercise.id)),e.R7$(2),e.Y8G("color",i.showRpe?"primary":"medium"),e.R7$(2),e.SpI(" ",i.showRpe?"Hide RPE":"Show RPE"," "),e.R7$(),e.Y8G("ngIf",i.sets.length>0),e.R7$(),e.Y8G("ngIf",i.isLoadingSets),e.R7$(),e.Y8G("ngIf",!i.isLoadingSets)}}function Se(r,s){if(1&r){const i=e.RV6();e.j41(0,"ion-reorder-group",25),e.bIt("ionItemReorder",function(t){a.eBV(i);const o=e.XpG(2);return a.Njj(o.handleExerciseReorder(t))}),e.DNE(1,ye,26,9,"ion-item",26),e.k0s()}if(2&r){const i=e.XpG(2);e.Y8G("disabled",!1),e.R7$(),e.Y8G("ngForOf",i.sessionExercises)}}function Me(r,s){1&r&&(e.j41(0,"div",78),e.nrm(1,"ion-icon",79),e.j41(2,"p"),e.EFF(3,"No exercises added yet"),e.k0s()())}function Oe(r,s){if(1&r){const i=e.RV6();e.qex(0),e.j41(1,"ion-card",8)(2,"ion-card-header")(3,"ion-card-subtitle"),e.EFF(4),e.k0s(),e.j41(5,"ion-card-title"),e.EFF(6),e.k0s()(),e.DNE(7,le,5,1,"ion-card-content",1),e.k0s(),e.j41(8,"div",9)(9,"div",10)(10,"h2"),e.EFF(11,"Exercises"),e.k0s(),e.DNE(12,de,2,1,"span",11),e.k0s(),e.DNE(13,pe,2,2,"div",12)(14,Se,2,2,"ion-reorder-group",13)(15,Me,4,0,"div",14),e.j41(16,"ion-button",15),e.bIt("click",function(){a.eBV(i);const t=e.XpG();return a.Njj(t.openExercisePicker())}),e.nrm(17,"ion-icon",16),e.EFF(18," Add Exercise "),e.k0s()(),e.j41(19,"ion-button",17),e.bIt("click",function(){a.eBV(i);const t=e.XpG();return a.Njj(t.finishSession())}),e.nrm(20,"ion-icon",18),e.EFF(21),e.k0s(),e.bVm()}if(2&r){const i=e.XpG();e.R7$(4),e.SpI(" ",i.formatStartDate(i.session.startedAt)," "),e.R7$(2),e.SpI(" Started at ",i.formatStartTime(i.session.startedAt)," "),e.R7$(),e.Y8G("ngIf",i.getQuestLabel(i.session.questId)),e.R7$(5),e.Y8G("ngIf",i.sessionExercises.length>0),e.R7$(),e.Y8G("ngIf",i.isLoadingExercises),e.R7$(),e.Y8G("ngIf",!i.isLoadingExercises&&i.sessionExercises.length>0),e.R7$(),e.Y8G("ngIf",!i.isLoadingExercises&&0===i.sessionExercises.length),e.R7$(4),e.Y8G("disabled",i.isFinishing),e.R7$(2),e.SpI(" ",i.isFinishing?"Finishing...":"Finish Session"," ")}}function ke(r,s){if(1&r){const i=e.RV6();e.j41(0,"div",80)(1,"span",81),e.EFF(2,"Exercise removed."),e.k0s(),e.j41(3,"button",82),e.bIt("click",function(){a.eBV(i);const t=e.XpG();return a.Njj(t.undoRemoveExercise())}),e.EFF(4,"Undo"),e.k0s()()}}const Ie={quick:"Quick Session","full-body":"Full Body",upper:"Upper Body",lower:"Lower Body"},je=[{path:"",component:(()=>{var r;class s{constructor(n,t,o,c,d,p){this.route=n,this.router=t,this.db=o,this.modalController=c,this.appEvents=d,this.xpService=p,this.session=null,this.sessionExercises=[],this.isLoading=!0,this.isLoadingExercises=!1,this.loadError=!1,this.isFinishing=!1,this.ghostByExerciseId={},this.undoState=null,this.undoTimer=null,this.setUpdateSubject=new O.B,this.destroy$=new O.B,this.setUpdateSubject.pipe(function Z(r,s=H){return(0,q.N)((i,n)=>{let t=null,o=null,c=null;const d=()=>{if(t){t.unsubscribe(),t=null;const u=o;o=null,n.next(u)}};function p(){const u=c+r,h=s.now();if(h<u)return t=this.schedule(void 0,u-h),void n.add(t);d()}i.subscribe((0,K._)(n,u=>{o=u,c=s.now(),t||(t=s.schedule(p,r),n.add(t))},()=>{d(),n.complete()},void 0,()=>{o=t=null}))})}(300),(0,ee.Q)(this.destroy$)).subscribe(u=>{this.persistSet(u.set)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.undoTimer&&(clearTimeout(this.undoTimer),this.undoTimer=null)}ngOnInit(){return(0,_.A)(function*(){})()}ionViewWillEnter(){var n=this;return(0,_.A)(function*(){n.isFinishing=!1,n.clearUndo();const t=n.route.snapshot.paramMap.get("id");if(!t)return n.loadError=!0,void(n.isLoading=!1);yield n.loadSession(t)})()}loadSession(n){var t=this;return(0,_.A)(function*(){t.isLoading=!0;try{const o=yield t.db.getSession(n);o?(t.session=o,yield t.loadSessionExercises()):t.loadError=!0}catch(o){console.error("Failed to load session:",o),t.loadError=!0}finally{t.isLoading=!1}})()}loadSessionExercises(){var n=this;return(0,_.A)(function*(){if(n.session){n.isLoadingExercises=!0;try{const t=yield n.db.getSessionExercises(n.session.id);if(0===t.length)return void(n.sessionExercises=[]);const o=t.map(d=>d.exerciseId),c=yield n.db.getExercisesByIds(o);n.sessionExercises=t.map(d=>{const p=c.get(d.exerciseId);return p?{sessionExercise:d,exercise:p,sets:[],showRpe:!1,isLoadingSets:!0}:(console.warn(`Exercise not found for id: ${d.exerciseId}`),null)}).filter(d=>null!==d),yield Promise.all([n.loadAllSets(),n.loadAllGhostData()])}catch(t){console.error("Failed to load session exercises:",t)}finally{n.isLoadingExercises=!1}}})()}loadAllSets(){var n=this;return(0,_.A)(function*(){yield Promise.all(n.sessionExercises.map(t=>n.loadSetsForExercise(t)))})()}loadAllGhostData(){var n=this;return(0,_.A)(function*(){n.session&&(yield Promise.all(n.sessionExercises.map(t=>n.loadGhostForExercise(t.exercise.id))))})()}loadGhostForExercise(n){var t=this;return(0,_.A)(function*(){if(t.session&&!(n in t.ghostByExerciseId))try{const o=yield t.db.getLastAttempt(n,t.session.id);t.ghostByExerciseId[n]=o}catch(o){console.error(`Failed to load ghost data for exercise ${n}:`,o),t.ghostByExerciseId[n]=null}})()}loadSetsForExercise(n){var t=this;return(0,_.A)(function*(){n.isLoadingSets=!0;try{n.sets=yield t.db.getSetsForSessionExercise(n.sessionExercise.id)}catch(o){console.error(`Failed to load sets for exercise ${n.sessionExercise.id}:`,o),n.sets=[]}finally{n.isLoadingSets=!1}})()}openExercisePicker(){var n=this;return(0,_.A)(function*(){const t=yield n.modalController.create({component:L});yield t.present();const{data:o}=yield t.onWillDismiss();o?.exercise&&(yield n.addExerciseToSession(o.exercise))})()}addExerciseToSession(n){var t=this;return(0,_.A)(function*(){if(t.session)try{const o=yield t.db.getNextOrderIndex(t.session.id),c={id:(0,b.l)(),sessionId:t.session.id,exerciseId:n.id,orderIndex:o};yield t.db.addSessionExercise(c),t.sessionExercises.push({sessionExercise:c,exercise:n,sets:[],showRpe:!1,isLoadingSets:!1}),t.loadGhostForExercise(n.id)}catch(o){console.error("Failed to add exercise to session:",o)}})()}finishSession(){var n=this;return(0,_.A)(function*(){if(n.session&&!n.isFinishing){n.isFinishing=!0;try{const t=(new Date).toISOString();n.session.endedAt=t,n.session.updatedAt=t,yield n.db.updateSession(n.session),yield n.xpService.awardSessionXp(n.session.id),n.appEvents.emitSessionDataChanged(),n.router.navigate(["/session",n.session.id,"summary"])}catch(t){console.error("Failed to finish session:",t),n.isFinishing=!1}}})()}removeExercise(n){var t=this;return(0,_.A)(function*(){t.clearUndo();const o=t.sessionExercises.findIndex(c=>c.sessionExercise.id===n.sessionExercise.id);if(-1!==o)try{yield t.db.deleteSessionExercise(n.sessionExercise.id),t.sessionExercises.splice(o,1),t.undoState={item:n,originalIndex:o},t.undoTimer=setTimeout(()=>{t.clearUndo()},5e3)}catch(c){console.error("Failed to remove exercise:",c)}})()}undoRemoveExercise(){var n=this;return(0,_.A)(function*(){if(!n.undoState)return;const{item:t,originalIndex:o}=n.undoState;try{yield n.db.restoreSessionExercise(t.sessionExercise,t.sets),n.sessionExercises.splice(o,0,t),n.clearUndo()}catch(c){console.error("Failed to undo exercise removal:",c),n.clearUndo()}})()}clearUndo(){this.undoTimer&&(clearTimeout(this.undoTimer),this.undoTimer=null),this.undoState=null}handleExerciseReorder(n){var t=this;return(0,_.A)(function*(){const{from:o,to:c}=n.detail;if(n.detail.complete(),o===c)return;const[d]=t.sessionExercises.splice(o,1);t.sessionExercises.splice(c,0,d);const p=t.sessionExercises.map((u,h)=>({id:u.sessionExercise.id,orderIndex:h}));t.sessionExercises.forEach((u,h)=>{u.sessionExercise.orderIndex=h});try{yield t.db.updateSessionExerciseOrder(p)}catch(u){console.error("Failed to persist exercise order:",u)}})()}addSet(n){var t=this;return(0,_.A)(function*(){try{const o=yield t.db.getNextSetIndex(n.sessionExercise.id),c={id:(0,b.l)(),sessionExerciseId:n.sessionExercise.id,setIndex:o,createdAt:(new Date).toISOString()};yield t.db.addSet(c),n.sets.push(c)}catch(o){console.error("Failed to add set:",o)}})()}removeSet(n,t){var o=this;return(0,_.A)(function*(){try{yield o.db.deleteSet(t.id);const c=n.sets.findIndex(d=>d.id===t.id);-1!==c&&n.sets.splice(c,1),yield o.db.reindexSets(n.sessionExercise.id),n.sets.forEach((d,p)=>{d.setIndex=p})}catch(c){console.error("Failed to remove set:",c)}})()}toggleRpe(n){n.showRpe=!n.showRpe}onWeightChange(n,t){n.weight=this.parseWeight(t),this.queueSetUpdate(n)}onRepsChange(n,t){n.reps=this.parseReps(t),this.queueSetUpdate(n)}onRpeChange(n,t){n.rpe=this.parseRpe(t),this.queueSetUpdate(n)}onInputBlur(n){this.persistSet(n)}queueSetUpdate(n){this.setUpdateSubject.next({set:n})}persistSet(n){var t=this;return(0,_.A)(function*(){try{yield t.db.updateSet(n)}catch(o){console.error("Failed to persist set:",o)}})()}parseWeight(n){if(!n||""===n.trim())return;const t=parseFloat(n);return isNaN(t)?void 0:t}parseReps(n){if(!n||""===n.trim())return;const t=parseInt(n,10);return isNaN(t)?void 0:t}parseRpe(n){if(!n||""===n.trim())return;const t=parseInt(n,10);return isNaN(t)?void 0:Math.max(1,Math.min(10,t))}formatStartTime(n){return new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}formatStartDate(n){return new Date(n).toLocaleDateString([],{weekday:"short",month:"short",day:"numeric"})}getQuestLabel(n){return n&&Ie[n]||null}formatCategory(n){return n.charAt(0).toUpperCase()+n.slice(1)}getGhost(n){return this.ghostByExerciseId[n]??null}formatGhostDate(n){return new Date(n).toLocaleDateString([],{month:"short",day:"numeric"})}formatGhostSet(n){return`${void 0!==n.weight?`${n.weight} kg`:"\u2014"} \xd7 ${void 0!==n.reps?`${n.reps}`:"\u2014"}`}canCopyLastSets(n){const t=this.getGhost(n.exercise.id);return null!==t&&t.sets.length>0&&0===n.sets.length}copyLastSets(n){var t=this;return(0,_.A)(function*(){if(!t.canCopyLastSets(n))return;const o=t.getGhost(n.exercise.id);if(o&&0!==o.sets.length)try{const c=(new Date).toISOString(),d=o.sets.map((p,u)=>({id:(0,b.l)(),sessionExerciseId:n.sessionExercise.id,setIndex:u,weight:p.weight,reps:p.reps,rpe:p.rpe,isWarmup:p.isWarmup,createdAt:c}));yield t.db.bulkAddSets(d),n.sets=d}catch(c){console.error("Failed to copy last sets:",c)}})()}static#e=r=()=>(this.\u0275fac=function(t){return new(t||s)(e.rXU(I.nX),e.rXU(I.Ix),e.rXU(P.at),e.rXU(l.W3),e.rXU(ne.k),e.rXU(se))},this.\u0275cmp=e.VBU({type:s,selectors:[["app-session"]],standalone:!1,decls:9,vars:4,consts:[[1,"ion-padding"],[4,"ngIf"],["class","undo-toast",4,"ngIf"],[1,"loading-state"],["name","crescent"],[1,"error-state"],["name","alert-circle-outline"],["routerLink","/tabs/home","fill","outline"],[1,"session-info-card"],[1,"exercises-section"],[1,"section-header"],["class","exercise-count",4,"ngIf"],["class","ion-padding-vertical",4,"ngIf"],["class","exercise-cards",3,"disabled","ionItemReorder",4,"ngIf"],["class","exercises-empty",4,"ngIf"],["expand","block","fill","outline",1,"add-exercise-button",3,"click"],["slot","start","name","add-outline"],["expand","block",1,"finish-session-button",3,"click","disabled"],["slot","start","name","checkmark-circle-outline"],["name","fitness-outline"],[1,"exercise-count"],[1,"ion-padding-vertical"],[4,"ngFor","ngForOf"],["animated","",2,"width","60%"],["animated","",2,"width","40%"],[1,"exercise-cards",3,"ionItemReorder","disabled"],["lines","none","class","exercise-item",4,"ngFor","ngForOf"],["lines","none",1,"exercise-item"],["slot","start"],[1,"exercise-card"],[1,"exercise-header-row"],[1,"exercise-header-info"],[1,"exercise-number"],["fill","clear","size","small","color","medium",1,"remove-exercise-button",3,"click"],["slot","icon-only","name","close-outline"],[1,"rpe-toggle"],["fill","clear","size","small",3,"click","color"],["slot","start","name","speedometer-outline"],["class","sets-header",4,"ngIf"],["class","sets-loading",4,"ngIf"],["class","sets-list",4,"ngIf"],["expand","block","fill","clear","size","small",1,"add-set-button",3,"click"],["class","ghost-section",4,"ngIf"],[1,"ghost-section"],[1,"ghost-header"],[1,"ghost-label"],[1,"ghost-date"],[1,"ghost-sets"],["class","ghost-set",4,"ngFor","ngForOf"],["fill","clear","size","small","class","copy-sets-button",3,"click",4,"ngIf"],[1,"ghost-set"],["fill","clear","size","small",1,"copy-sets-button",3,"click"],["slot","start","name","copy-outline"],[1,"sets-header"],[1,"set-col","set-label"],[1,"set-col","weight-label"],[1,"set-col","reps-label"],["class","set-col rpe-label",4,"ngIf"],[1,"set-col","action-label"],[1,"set-col","rpe-label"],[1,"sets-loading"],["animated","",2,"width","100%","height","40px"],[1,"sets-list"],["class","set-row",4,"ngFor","ngForOf"],["class","no-sets",4,"ngIf"],[1,"set-row"],[1,"set-col","set-number"],[1,"set-col","weight-input"],["type","text","inputmode","decimal","autocomplete","off","enterkeyhint","next","placeholder","\u2014",3,"ionInput","ionBlur","value"],[1,"set-col","reps-input"],["type","text","inputmode","numeric","autocomplete","off","enterkeyhint","next","placeholder","\u2014",3,"ionInput","ionBlur","value"],["class","set-col rpe-input",4,"ngIf"],[1,"set-col","action-col"],["fill","clear","size","small","color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[1,"set-col","rpe-input"],["type","text","inputmode","numeric","autocomplete","off","enterkeyhint","done","placeholder","\u2014",3,"ionInput","ionBlur","value"],[1,"no-sets"],[1,"exercises-empty"],["name","barbell-outline"],[1,"undo-toast"],[1,"undo-message"],[1,"undo-action",3,"click"]],template:function(t,o){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Session In Progress"),e.k0s()()(),e.j41(4,"ion-content",0),e.DNE(5,ce,5,0,"ng-container",1)(6,ae,9,0,"ng-container",1)(7,Oe,22,9,"ng-container",1)(8,ke,5,0,"div",2),e.k0s()),2&t&&(e.R7$(5),e.Y8G("ngIf",o.isLoading),e.R7$(),e.Y8G("ngIf",!o.isLoading&&o.loadError),e.R7$(),e.Y8G("ngIf",!o.isLoading&&!o.loadError&&o.session),e.R7$(),e.Y8G("ngIf",o.undoState))},dependencies:[m.Sq,m.bT,l.Jm,l.b_,l.I9,l.ME,l.HW,l.tN,l.ZB,l.W9,l.eU,l.iq,l.$w,l.uz,l.he,l.UB,l.p$,l.ds,l.w2,l.BC,l.ai,l.Gw,l.N7,S.Wk],styles:[".loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:48px 24px;height:60%}.loading-state[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;opacity:.3;margin-bottom:16px}.loading-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.25rem;font-weight:600}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;opacity:.6}.session-info-card[_ngcontent-%COMP%]{margin-bottom:24px}.exercises-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px}.exercises-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600}.exercises-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .exercise-count[_ngcontent-%COMP%]{background:var(--ion-color-step-150);padding:2px 8px;border-radius:12px;font-size:.8rem;opacity:.7}.exercise-cards[_ngcontent-%COMP%]{margin-bottom:16px}.exercise-item[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--inner-padding-start: 0;--inner-padding-end: 0;--background: transparent;--min-height: auto;align-items:stretch}.exercise-item[_ngcontent-%COMP%]   ion-reorder[_ngcontent-%COMP%]{margin-right:8px;margin-left:0;display:flex;align-items:flex-start;padding-top:20px;color:var(--ion-color-step-400);cursor:grab}.exercise-item[_ngcontent-%COMP%]   ion-reorder[_ngcontent-%COMP%]:active{cursor:grabbing}.exercise-item[_ngcontent-%COMP%]   .exercise-card[_ngcontent-%COMP%]{flex:1;margin:0}ion-reorder-group[_ngcontent-%COMP%]   .item-reorder-selected[_ngcontent-%COMP%]   .exercise-card[_ngcontent-%COMP%]{box-shadow:0 4px 16px #0000004d}.exercise-card[_ngcontent-%COMP%]{margin-bottom:16px}.exercise-card[_ngcontent-%COMP%]   .exercise-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.exercise-card[_ngcontent-%COMP%]   .exercise-header-info[_ngcontent-%COMP%]{flex:1;min-width:0}.exercise-card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.exercise-card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]   .exercise-number[_ngcontent-%COMP%]{background:var(--ion-color-primary);color:var(--ion-color-primary-contrast);width:20px;height:20px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:600}.exercise-card[_ngcontent-%COMP%]   .remove-exercise-button[_ngcontent-%COMP%]{--padding-start: 4px;--padding-end: 4px;margin:0;opacity:.5}.exercise-card[_ngcontent-%COMP%]   .remove-exercise-button[_ngcontent-%COMP%]:hover{opacity:1}.exercise-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding-top:0}.ghost-section[_ngcontent-%COMP%]{background:var(--ion-color-step-100);border-radius:6px;padding:10px 12px;margin-bottom:12px;border-left:2px solid var(--ion-color-step-300)}.ghost-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}.ghost-label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px;color:var(--ion-color-step-600)}.ghost-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--ion-color-step-500)}.ghost-sets[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.ghost-set[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-step-550);font-family:IBM Plex Mono,monospace;white-space:nowrap}.copy-sets-button[_ngcontent-%COMP%]{margin-top:8px;--color: var(--ion-color-step-600);--padding-end: 0;font-size:.75rem}.copy-sets-button[_ngcontent-%COMP%]:hover{--color: var(--ion-color-primary)}.rpe-toggle[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:8px}.rpe-toggle[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;font-size:.8rem}.sets-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 0;border-bottom:1px solid var(--ion-color-step-150);margin-bottom:4px;font-size:.75rem;font-weight:500;opacity:.6;text-transform:uppercase;letter-spacing:.5px}.sets-list[_ngcontent-%COMP%]{margin-bottom:8px}.set-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 0;border-bottom:1px solid var(--ion-color-step-150);min-height:52px}.set-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.set-col[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.set-label[_ngcontent-%COMP%], .set-number[_ngcontent-%COMP%]{width:40px;flex-shrink:0;font-weight:500}.set-number[_ngcontent-%COMP%]{font-size:.9rem;opacity:.7}.weight-label[_ngcontent-%COMP%], .weight-input[_ngcontent-%COMP%], .reps-label[_ngcontent-%COMP%], .reps-input[_ngcontent-%COMP%], .rpe-label[_ngcontent-%COMP%], .rpe-input[_ngcontent-%COMP%]{flex:1;min-width:0}.weight-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .reps-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .rpe-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--background: var(--ion-color-step-150);--padding-start: 8px;--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;border-radius:6px;overflow:clip;font-size:1rem;text-align:center;margin:0 4px;min-height:44px}.weight-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]::part(native), .reps-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]::part(native), .rpe-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]::part(native){text-align:center;appearance:textfield;-moz-appearance:textfield}.weight-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]::part(native)::-webkit-outer-spin-button, .weight-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]::part(native)::-webkit-inner-spin-button, .reps-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]::part(native)::-webkit-outer-spin-button, .reps-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]::part(native)::-webkit-inner-spin-button, .rpe-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]::part(native)::-webkit-outer-spin-button, .rpe-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]::part(native)::-webkit-inner-spin-button{appearance:none;-webkit-appearance:none;margin:0}.weight-input[_ngcontent-%COMP%]   ion-input.has-focus[_ngcontent-%COMP%], .reps-input[_ngcontent-%COMP%]   ion-input.has-focus[_ngcontent-%COMP%], .rpe-input[_ngcontent-%COMP%]   ion-input.has-focus[_ngcontent-%COMP%]{--background: var(--ion-color-step-200)}.action-label[_ngcontent-%COMP%], .action-col[_ngcontent-%COMP%]{width:40px;flex-shrink:0}.action-label[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], .action-col[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 4px;--padding-end: 4px;margin:0}.no-sets[_ngcontent-%COMP%]{text-align:center;padding:16px;opacity:.5;font-size:.9rem}.no-sets[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.sets-loading[_ngcontent-%COMP%]{padding:8px 0}.add-set-button[_ngcontent-%COMP%]{margin-top:8px;--color: var(--ion-color-primary)}.exercises-empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:32px 24px;border:1px dashed var(--ion-color-step-150);border-radius:8px;margin-bottom:16px}.exercises-empty[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px;opacity:.2;margin-bottom:8px}.exercises-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;opacity:.5;font-size:.9rem}.add-exercise-button[_ngcontent-%COMP%]{margin-top:8px}.finish-session-button[_ngcontent-%COMP%]{margin-top:24px;--background: var(--ion-color-success);--background-hover: var(--ion-color-success-shade)}.undo-toast[_ngcontent-%COMP%]{position:fixed;bottom:16px;left:16px;right:16px;background:var(--ion-color-step-200);border-radius:6px;padding:12px 16px;display:flex;justify-content:space-between;align-items:center;z-index:1000}.undo-toast[_ngcontent-%COMP%]   .undo-message[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-text-color)}.undo-toast[_ngcontent-%COMP%]   .undo-action[_ngcontent-%COMP%]{background:none;border:none;color:var(--ion-color-primary);font-size:.9rem;font-weight:500;padding:0;cursor:pointer}.undo-toast[_ngcontent-%COMP%]   .undo-action[_ngcontent-%COMP%]:hover{text-decoration:underline}"]}))}return r(),s})()}];let Re=(()=>{var r;class s{static#e=r=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275mod=e.$C({type:s}),this.\u0275inj=a.G2t({imports:[S.iI.forChild(je),S.iI]}))}return r(),s})(),Ge=(()=>{var r;class s{static#e=r=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275mod=e.$C({type:s}),this.\u0275inj=a.G2t({imports:[m.MD,C.YN,l.bv]}))}return r(),s})(),$e=(()=>{var r;class s{static#e=r=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275mod=e.$C({type:s}),this.\u0275inj=a.G2t({imports:[m.MD,C.YN,l.bv,Re,Ge]}))}return r(),s})()}}]);