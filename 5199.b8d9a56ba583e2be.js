"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5199],{5199:(z,h,c)=>{c.r(h),c.d(h,{SessionSummaryPageModule:()=>w});var p=c(2200),r=c(7343),f=c(8132),x=c(467),n=c(3664),g=c(2615),P=c(8012),M=c(5032),C=c(6057);function O(i,o){1&i&&(n.qex(0),n.j41(1,"div",2),n.nrm(2,"ion-spinner",3),n.j41(3,"p"),n.EFF(4,"Loading summary..."),n.k0s()(),n.bVm())}function F(i,o){if(1&i){const t=n.RV6();n.qex(0),n.j41(1,"div",4),n.nrm(2,"ion-icon",5),n.j41(3,"h2"),n.EFF(4,"Session not found"),n.k0s(),n.j41(5,"p"),n.EFF(6,"Unable to load session summary."),n.k0s(),n.j41(7,"ion-button",6),n.bIt("click",function(){g.eBV(t);const e=n.XpG();return g.Njj(e.goHome())}),n.EFF(8," Return Home "),n.k0s()(),n.bVm()}}function S(i,o){if(1&i&&(n.j41(0,"div",11)(1,"span",12),n.EFF(2,"Ended"),n.k0s(),n.j41(3,"span",13),n.EFF(4),n.k0s()()),2&i){const t=n.XpG(2);n.R7$(4),n.JRh(t.formatTime(t.session.endedAt))}}function v(i,o){if(1&i&&(n.j41(0,"div",11)(1,"span",12),n.EFF(2,"Duration"),n.k0s(),n.j41(3,"span",13),n.EFF(4),n.k0s()()),2&i){const t=n.XpG(2);n.R7$(4),n.SpI("",t.getDurationMinutes()," min")}}function b(i,o){if(1&i&&(n.j41(0,"div",22)(1,"ion-chip"),n.nrm(2,"ion-icon",23),n.j41(3,"ion-label"),n.EFF(4),n.k0s()()()),2&i){const t=o.ngIf;n.R7$(4),n.JRh(t)}}function k(i,o){if(1&i&&(n.j41(0,"ion-item",27)(1,"ion-label")(2,"h3"),n.EFF(3),n.k0s(),n.j41(4,"p",28),n.EFF(5),n.k0s()(),n.j41(6,"ion-note",29),n.EFF(7,"new"),n.k0s()()),2&i){const t=o.$implicit;n.R7$(3),n.JRh(t.exerciseName),n.R7$(2),n.Lme("",t.previousMax," kg \u2192 ",t.newMax," kg")}}function E(i,o){if(1&i&&(n.j41(0,"div",24)(1,"h2"),n.EFF(2,"Top Weights"),n.k0s(),n.j41(3,"ion-list",25),n.DNE(4,k,8,3,"ion-item",26),n.k0s()()),2&i){const t=n.XpG(2);n.R7$(4),n.Y8G("ngForOf",t.prs)}}function j(i,o){if(1&i){const t=n.RV6();n.j41(0,"ion-item",33),n.bIt("click",function(){g.eBV(t);const e=n.XpG(3);return g.Njj(e.editSession())}),n.j41(1,"ion-label")(2,"h2"),n.EFF(3),n.k0s(),n.j41(4,"p"),n.EFF(5),n.k0s()(),n.j41(6,"ion-note",34),n.EFF(7),n.k0s()()}if(2&i){const t=o.$implicit,s=n.XpG(3);n.R7$(3),n.JRh(t.name),n.R7$(2),n.JRh(s.formatCategory(t.category)),n.R7$(2),n.SpI("",t.setCount," sets")}}function I(i,o){if(1&i&&(n.j41(0,"div",30)(1,"h2"),n.EFF(2,"Exercises"),n.k0s(),n.j41(3,"p",31),n.EFF(4),n.k0s(),n.j41(5,"ion-list"),n.DNE(6,j,8,3,"ion-item",32),n.k0s()()),2&i){const t=n.XpG(2);n.R7$(4),n.Lme("",t.exercises.length," exercises \xb7 ",t.getTotalSets()," sets logged"),n.R7$(2),n.Y8G("ngForOf",t.exercises)}}function R(i,o){1&i&&(n.j41(0,"div",35)(1,"p"),n.EFF(2,"No exercises were logged in this session."),n.k0s()())}function T(i,o){if(1&i){const t=n.RV6();n.qex(0),n.j41(1,"div",7)(2,"h1"),n.EFF(3,"Session Complete"),n.k0s(),n.j41(4,"p",8),n.EFF(5,"Here's what was logged."),n.k0s()(),n.j41(6,"ion-card",9)(7,"ion-card-content")(8,"div",10)(9,"div",11)(10,"span",12),n.EFF(11,"Date"),n.k0s(),n.j41(12,"span",13),n.EFF(13),n.k0s()(),n.j41(14,"div",11)(15,"span",12),n.EFF(16,"Started"),n.k0s(),n.j41(17,"span",13),n.EFF(18),n.k0s()(),n.DNE(19,S,5,1,"div",14)(20,v,5,1,"div",14),n.k0s(),n.DNE(21,b,5,1,"div",15),n.k0s()(),n.DNE(22,E,5,1,"div",16)(23,I,7,3,"div",17)(24,R,3,0,"div",18),n.j41(25,"div",19)(26,"ion-button",20),n.bIt("click",function(){g.eBV(t);const e=n.XpG();return g.Njj(e.goHome())}),n.EFF(27," Done "),n.k0s(),n.j41(28,"ion-button",21),n.bIt("click",function(){g.eBV(t);const e=n.XpG();return g.Njj(e.editSession())}),n.EFF(29," Edit session "),n.k0s()(),n.bVm()}if(2&i){const t=n.XpG();n.R7$(13),n.JRh(t.formatDate(t.session.startedAt)),n.R7$(5),n.JRh(t.formatTime(t.session.startedAt)),n.R7$(),n.Y8G("ngIf",t.session.endedAt),n.R7$(),n.Y8G("ngIf",t.session.endedAt),n.R7$(),n.Y8G("ngIf",t.getQuestLabel(t.session.questId)),n.R7$(),n.Y8G("ngIf",t.prs.length>0),n.R7$(),n.Y8G("ngIf",t.exercises.length>0),n.R7$(),n.Y8G("ngIf",0===t.exercises.length)}}const $={quick:"Quick Session","full-body":"Full Body",upper:"Upper Body",lower:"Lower Body"},G=[{path:"",component:(()=>{var i;class o{constructor(s,e,a,u){this.route=s,this.router=e,this.navController=a,this.db=u,this.session=null,this.exercises=[],this.prs=[],this.isLoading=!0,this.loadError=!1,this.sessionId=null}ngOnInit(){this.sessionId=this.route.snapshot.paramMap.get("id"),this.sessionId||(this.loadError=!0,this.isLoading=!1)}ionViewWillEnter(){var s=this;return(0,x.A)(function*(){s.sessionId&&(yield s.loadSessionSummary(s.sessionId))})()}loadSessionSummary(s){var e=this;return(0,x.A)(function*(){e.isLoading=!0;try{const a=yield e.db.getSession(s);if(!a)return void(e.loadError=!0);e.session=a;const u=yield e.db.getSessionExercises(s),B=u.map(l=>l.exerciseId),L=yield e.db.getExercisesByIds(B),y=[];for(const l of u){const d=L.get(l.exerciseId);if(!d)continue;const m=yield e.db.getSetsForSessionExercise(l.id);y.push({name:d.name,category:d.category,setCount:m.length})}e.exercises=y;const _=yield e.db.getPREventsForSession(s);if(_.length>0){const l=_.map(m=>m.exerciseId),d=yield e.db.getExercisesByIds(l);e.prs=_.map(m=>({exerciseName:d.get(m.exerciseId)?.name||"Unknown Exercise",previousMax:m.previousMax,newMax:m.newMax}))}else e.prs=[]}catch(a){console.error("Failed to load session summary:",a),e.loadError=!0}finally{e.isLoading=!1}})()}goHome(){this.navController.navigateRoot("/tabs",{animated:!0,animationDirection:"back"})}editSession(){this.session&&this.router.navigate(["/session",this.session.id])}getQuestLabel(s){return s&&$[s]||null}formatDate(s){return new Date(s).toLocaleDateString([],{weekday:"short",month:"short",day:"numeric"})}formatTime(s){return new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}getDurationMinutes(){if(!this.session?.startedAt||!this.session?.endedAt)return 0;const s=new Date(this.session.startedAt).getTime(),e=new Date(this.session.endedAt).getTime();return Math.round((e-s)/6e4)}getTotalSets(){return this.exercises.reduce((s,e)=>s+e.setCount,0)}formatCategory(s){return s.charAt(0).toUpperCase()+s.slice(1)}static#n=i=()=>(this.\u0275fac=function(e){return new(e||o)(n.rXU(P.nX),n.rXU(P.Ix),n.rXU(M.q9),n.rXU(C.at))},this.\u0275cmp=n.VBU({type:o,selectors:[["app-session-summary"]],standalone:!1,decls:8,vars:3,consts:[[1,"ion-padding"],[4,"ngIf"],[1,"loading-state"],["name","crescent"],[1,"error-state"],["name","alert-circle-outline"],["fill","outline",3,"click"],[1,"summary-header"],[1,"summary-subtext"],[1,"stats-card"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],["class","stat-item",4,"ngIf"],["class","quest-label",4,"ngIf"],["class","highlights-section",4,"ngIf"],["class","exercises-summary",4,"ngIf"],["class","no-exercises",4,"ngIf"],[1,"summary-actions"],["expand","block",1,"done-button",3,"click"],["expand","block","fill","clear",1,"edit-button",3,"click"],[1,"quest-label"],["name","fitness-outline"],[1,"highlights-section"],[1,"highlights-list"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],[1,"pr-detail"],["slot","end",1,"pr-badge"],[1,"exercises-summary"],[1,"exercise-count"],["button","","detail","true",3,"click",4,"ngFor","ngForOf"],["button","","detail","true",3,"click"],["slot","end"],[1,"no-exercises"]],template:function(e,a){1&e&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n.EFF(3,"Session Summary"),n.k0s()()(),n.j41(4,"ion-content",0),n.DNE(5,O,5,0,"ng-container",1)(6,F,9,0,"ng-container",1)(7,T,30,8,"ng-container",1),n.k0s()),2&e&&(n.R7$(5),n.Y8G("ngIf",a.isLoading),n.R7$(),n.Y8G("ngIf",!a.isLoading&&a.loadError),n.R7$(),n.Y8G("ngIf",!a.isLoading&&!a.loadError&&a.session))},dependencies:[p.Sq,p.bT,r.Jm,r.b_,r.I9,r.ZB,r.W9,r.eU,r.iq,r.uz,r.he,r.nf,r.JI,r.w2,r.BC,r.ai],styles:[".loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:48px 24px;height:60%}.loading-state[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;opacity:.3;margin-bottom:16px}.loading-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.25rem;font-weight:600}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;opacity:.6}.summary-header[_ngcontent-%COMP%]{text-align:center;padding:16px 0 24px}.summary-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1.4rem;font-weight:600}.summary-header[_ngcontent-%COMP%]   .summary-subtext[_ngcontent-%COMP%]{margin:0;font-size:.9rem;opacity:.6}.stats-card[_ngcontent-%COMP%]{margin-bottom:24px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.5px;opacity:.6}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}.quest-label[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-color-step-150)}.highlights-section[_ngcontent-%COMP%]{margin-bottom:24px}.highlights-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1.1rem;font-weight:600}.highlights-list[_ngcontent-%COMP%]{background:transparent}.highlights-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: var(--ion-color-step-100);margin-bottom:8px;border-radius:8px}.highlights-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin:0}.highlights-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .pr-detail[_ngcontent-%COMP%]{font-size:.85rem;font-family:IBM Plex Mono,monospace;opacity:.7;margin:4px 0 0}.pr-badge[_ngcontent-%COMP%]{font-size:.7rem;text-transform:uppercase;letter-spacing:.5px;color:var(--ion-color-primary);opacity:.8}.exercises-summary[_ngcontent-%COMP%]{margin-bottom:24px}.exercises-summary[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1.1rem;font-weight:600}.exercises-summary[_ngcontent-%COMP%]   .exercise-count[_ngcontent-%COMP%]{margin:0 0 12px;font-size:.85rem;opacity:.5}.exercises-summary[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:transparent}.exercises-summary[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: var(--ion-color-step-100);margin-bottom:8px;border-radius:8px;cursor:pointer}.exercises-summary[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin:0}.exercises-summary[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;opacity:.6;margin:0}.exercises-summary[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:.9rem;opacity:.7}.no-exercises[_ngcontent-%COMP%]{text-align:center;padding:24px;opacity:.5}.summary-actions[_ngcontent-%COMP%]{margin-top:24px}.done-button[_ngcontent-%COMP%]{margin-bottom:8px}.edit-button[_ngcontent-%COMP%]{--color: var(--ion-color-step-500);font-size:.9rem}.edit-button[_ngcontent-%COMP%]:hover{--color: var(--ion-color-primary)}"]}))}return i(),o})()}];let D=(()=>{var i;class o{static#n=i=()=>(this.\u0275fac=function(e){return new(e||o)},this.\u0275mod=n.$C({type:o}),this.\u0275inj=g.G2t({imports:[f.iI.forChild(G),f.iI]}))}return i(),o})(),w=(()=>{var i;class o{static#n=i=()=>(this.\u0275fac=function(e){return new(e||o)},this.\u0275mod=n.$C({type:o}),this.\u0275inj=g.G2t({imports:[p.MD,r.bv,D]}))}return i(),o})()}}]);